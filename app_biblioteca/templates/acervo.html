{% extends '_layouts/base_sistema.html' %}

{% block head %}
<title>Acervo Digital</title>
<link rel="stylesheet" href="../static/css/style_acervo.css">
{% endblock %}

{% block conteudo_main %}
<div style="display: flex; justify-content: space-between; text-align: center;">
    <h4 class="fs-7">Acervo Digital</h4>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ url_for('inicio') }}">Inicio</a></li>
            <li class="breadcrumb-item active" aria-current="page">Acervo Digital</li>
        </ol>
    </nav>
</div>
<hr>

<div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
    <p class="badge-principal">Livros Disponíveis</p>
    <form class="d-flex" role="search">
        <input class="form-control me-2" type="search" placeholder="Pesquisar por Título" aria-label="Search" />
        <button class="btn btn-sm btn-outline-success" type="submit"><i class="bi bi-search"></i></button>
    </form>
</div>

<section class="acervo">
    <div>
        <table class="table table-hover caption-top shadow p-3 mb-5 bg-body-tertiary rounded"
            style="text-align: center;">

            <thead>
                <tr class="table-light">
                    <th scope="col">Código</th>
                    <th scope="col">Capa</th>
                    <th scope="col">Titulo</th>
                    <th scope="col">Autor</th>
                    <th scope="col">Área do Conhecimento</th>
                    <th scope="col">Quantidade Disponível</th>
                    <th scope="col">Situação</th>
                </tr>
            </thead>
            <tbody>
                {% for linha in matriz_livros %}
                {% for livro in linha %}
                <tr>
                    <th scope="row">{{ livro['cod'] }}</th>
                    <td><img src="{{ livro['capa'] }}" width="auto" height="40px" alt="Capa livro"></td>
                    <td>{{ livro['titulo'] }}</td>
                    <td>{{ livro['autor'] }}</td>
                    <td>{{ livro['area_conhecimento'] }}</td>
                    <td>{{ livro['quantidade'] }}</td>
                    <td>
                        {% if livro['status'] == 'disponivel' %}
                        <a href="{{ url_for('emprestimo_livro', id=livro['cod']) }}">{{ livro['status'].title() }} <i
                                class="bi bi-check-circle-fill" style="color: darkgreen;"></i></a>
                        {% else %}
                        {{ livro['status'].title() }} <i class="bi bi-x-circle-fill" style="color: rgb(251, 5, 5);"></i>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
                {% if not loop.last %}
                <tr class="table-secondary">
                    <td colspan="7" style="height: 3px; background-color: #dee2e6;"></td>
                </tr>
                {% endif %}
                {% endfor %}
            </tbody>
        </table>
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <!-- Botão Anterior -->
                <li class="page-item {% if pagina_atual == 1 %}disabled{% endif %}">
                    <a class="page-link"
                        href="{{ url_for('acervo', pagina=pagina_atual-1) if pagina_atual > 1 else '#' }}"
                        aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>

                <!-- Páginas -->
                {% for num_pagina in range(1, total_paginas + 1) %}
                <li class="page-item {% if num_pagina == pagina_atual %}active{% endif %}">
                    <a class="page-link" href="{{ url_for('acervo', pagina=num_pagina) }}">{{ num_pagina }}</a>
                </li>
                {% endfor %}

                <!-- Botão Próximo -->
                <li class="page-item {% if pagina_atual == total_paginas %}disabled{% endif %}">
                    <a class="page-link"
                        href="{{ url_for('acervo', pagina=pagina_atual+1) if pagina_atual < total_paginas else '#' }}"
                        aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>

        <div class="text-center text-muted">
            Página {{ pagina_atual }} de {{ total_paginas }} |
            Matriz: {{ n_linhas_total }} linhas x 10 colunas |
            Total: {{ total_livros }} livros
        </div>
    </div>
</section>

{% endblock %}